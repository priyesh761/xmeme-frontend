<!DOCTYPE html>
<html>

<head>
	<title>
		X-meme
	</title>
	<style>

	</style>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

</head>

<body>
	<div>
		<div class="jumbotron fixed-top sticky-top m-1">
			<div class="row">
				<div class="col-12 col-md-6 d-flex justify-content-center">
					<h1 className="display-2">X-meme</h1>
				</div>
				<div class="col-12 col-md-6 d-flex justify-content-center">
					<form class="container-fluid">
						<div class="form-row">
							<div class="col-12 col-md-8 m-1 ml-auto mr-auto">
								<input required id="name" type="text" class="form-control" placeholder="name">
							</div>
						</div>

						<div class="form-row">
							<div class="col-12 col-md-8 m-1 ml-auto mr-auto">
								<input required id="caption" type="text" class="form-control" placeholder="caption">
							</div>
						</div>

						<div class="form-row">
							<div class="col-12 col-md-8 m-1 ml-auto mr-auto">
								<input required id="url" type="text" class="form-control" placeholder="url">
							</div>
						</div>
						<div class="col-12 col-md-4 m-1 ml-auto mr-auto">
							<button id="submit" class="btn btn-primary">Add meme</button>
						</div>

				</div>
				</form>

			</div>
		</div>

		<div id="wall" class="justify-content-center">

		</div>
		<div class="d-flex justify-content-center">
			<button class="btn btn-lg btn-dark m-1 p-1" onclick="loadPrev()">Prev</button>
			<button class="btn btn-lg btn-dark m-1 p-1" onclick="loadNext()">Next</button>
		</div>
	</div>

	<script src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver"></script>

	<script src="./api_call.js"></script>
	<script src="./index.js"></script>
	<script>
		//current page of post
		let pageNo = 0;
		updateWall();

		document.querySelector('#submit').addEventListener('click', async (e) => {
			e.preventDefault();
			let nm = document.querySelector("#name").value;
			let cp = document.querySelector("#caption").value;
			let lnk = document.querySelector("#url").value;

			post({ name: nm, caption: cp, url: lnk }).then((res) => {
				updateWall();
			});
		});

		//Load next page
		const loadNext = async () => {
			pageNo++;
			pageNo -= await updateWall(pageNo);
		}

		//Load previous page
		const loadPrev = async () => {
			pageNo--;
			pageNo += await updateWall(pageNo);
		}
	</script>
</body>

</html>